/* See the Tailwind configuration guide for advanced usage
   https://tailwindcss.com/docs/configuration */

@import "tailwindcss" source(none);
@source "../css";
@source "../js";
@source "../../lib/personal_site_web";

/* A Tailwind plugin that makes "hero-#{ICON}" classes available.
   The heroicons installation itself is managed by your mix.exs */
@plugin "../vendor/heroicons";

/* daisyUI Tailwind Plugin. You can update this file by fetching the latest version with:
   curl -sLO https://github.com/saadeghi/daisyui/releases/latest/download/daisyui.js
   Make sure to look at the daisyUI changelog: https://daisyui.com/docs/changelog/ */
@plugin "../vendor/daisyui" {
    themes: false;
}

/* Theme customizations */
@theme {
    --font-family-sans:
        Inter, ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji",
        "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
    --color-brand: #fd4f00;
    --max-width-1\/4: 25%;
    --max-width-1\/2: 50%;
    --max-width-3\/4: 75%;
}

/* Add variants based on LiveView classes */
@custom-variant phx-click-loading (.phx-click-loading&, .phx-click-loading &);
@custom-variant phx-submit-loading (.phx-submit-loading&, .phx-submit-loading &);
@custom-variant phx-change-loading (.phx-change-loading&, .phx-change-loading &);

/* Make LiveView wrapper divs transparent for layout */
[data-phx-session],
[data-phx-teleported-src] {
    display: contents;
}

/* This file is for your main application CSS */

@layer base {
    a {
        @apply hover:underline;
    }

    ol li {
        @apply text-sm list-decimal ml-5;
    }

    ul li {
        @apply text-sm list-disc ml-5;
    }

    pre {
        @apply text-xs p-2 border rounded-sm dark:border-white border-black overflow-x-scroll;
    }

    input[type="file"] {
        color: transparent;
    }

    input[type="file"]::file-selector-button {
        @apply mr-4 py-1 px-1 rounded-sm border border-solid border-black dark:border-white text-xs bg-white dark:bg-black transition-colors;
        color: black;
    }

    @media (prefers-color-scheme: dark) {
        input[type="file"]::file-selector-button {
            color: white;
        }
    }

    input[type="file"]::file-selector-button:hover {
        @apply bg-black dark:bg-white;
        color: white;
    }

    @media (prefers-color-scheme: dark) {
        input[type="file"]::file-selector-button:hover {
            color: black;
        }
    }

    input[type="file"]::-webkit-file-upload-button {
        @apply mr-4 py-1 px-1 rounded-sm border border-solid border-black dark:border-white text-xs bg-white dark:bg-black transition-colors;
        color: black;
    }

    @media (prefers-color-scheme: dark) {
        input[type="file"]::-webkit-file-upload-button {
            color: white;
        }
    }

    input[type="file"]::-webkit-file-upload-button:hover {
        @apply bg-black dark:bg-white;
        color: white;
    }

    @media (prefers-color-scheme: dark) {
        input[type="file"]::-webkit-file-upload-button:hover {
            color: black;
        }
    }
}

@layer components {
    main a {
        @apply underline;
        @apply hover:underline;
    }

    .post a {
        @apply underline;
    }

    .post p {
        @apply text-sm;
    }

    .post hr {
        @apply my-6 border-dashed;
    }

    .dropdown-content.menu li a {
        @apply px-2;
    }
}

@layer utilities {
    .sub {
        font-variant-position: sub;
    }

    .sup {
        font-variant-position: super;
    }

    .database-status {
        display: inline-block;
        width: 8px;
        height: 8px;
        border-radius: 50%;
        transition: all 0.3s ease;
        cursor: help;
        position: relative;
    }

    .database-status::after {
        content: attr(data-tooltip);
        position: absolute;
        bottom: 125%;
        left: 50%;
        transform: translateX(-50%);
        padding: 4px 8px;
        background-color: rgba(0, 0, 0, 0.9);
        color: white;
        font-size: 12px;
        border-radius: 4px;
        white-space: nowrap;
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.2s ease;
        z-index: 1000;
    }

    @media (prefers-color-scheme: dark) {
        .database-status::after {
            background-color: rgba(255, 255, 255, 0.9);
            color: black;
        }
    }

    .database-status:hover::after {
        opacity: 1;
    }

    @keyframes pulse-green {
        0%, 100% {
            box-shadow: 0 0 8px 2px rgba(34, 197, 94, 0.6);
        }
        50% {
            box-shadow: 0 0 12px 3px rgba(34, 197, 94, 0.8);
        }
    }

    @keyframes pulse-red {
        0%, 100% {
            box-shadow: 0 0 8px 2px rgba(239, 68, 68, 0.6);
        }
        50% {
            box-shadow: 0 0 12px 3px rgba(239, 68, 68, 0.8);
        }
    }

    .database-status.connected {
        background-color: #22c55e;
        box-shadow: 0 0 8px 2px rgba(34, 197, 94, 0.6);
        animation: pulse-green 3s ease-in-out infinite;
    }

    .database-status.disconnected {
        background-color: #ef4444;
        box-shadow: 0 0 8px 2px rgba(239, 68, 68, 0.6);
        animation: pulse-red 3s ease-in-out infinite;
    }
}
